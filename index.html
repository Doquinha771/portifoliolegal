<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>DokasOS - Edição Final</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" xintegrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;900&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=VT323&display=swap" rel="stylesheet">
    <script src="https://www.youtube.com/iframe_api"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.8.49/Tone.js"></script>
    <style>
        :root {
            --theme-primary: #8e44ad; --theme-secondary: #2c3e50; --theme-accent: #1abc9c;   
            --theme-accent-glow: #00ffc3; --theme-text-on-primary: #ecf0f1;
            --theme-text-general: #bdc3c7; --theme-text-general-muted: #95a5a6;
            --theme-window-bg: rgba(30, 41, 59, 0.8); --theme-window-border: rgba(26, 188, 156, 0.3);
            --theme-window-header-bg-start: rgba(52, 73, 94, 0.85); --theme-window-header-bg-end: rgba(44, 62, 80, 0.95);
            --theme-taskbar-bg: rgba(35, 45, 60, 0.85); --theme-taskbar-icon-color: #bdc3c7;
            --theme-taskbar-icon-active-bg: rgba(26, 188, 156, 0.2); --theme-taskbar-icon-active-border: var(--theme-accent);
            --theme-taskbar-icon-active-color: var(--theme-accent);
            --theme-icon-dock-bg: rgba(44, 62, 80, 0.9); --theme-icon-dock-border: rgba(26, 188, 156, 0.4);
            --theme-desktop-icon-bg-hover: rgba(62, 83, 104, 0.95); --theme-desktop-icon-color: #ecf0f1;
            --font-main: 'Inter', sans-serif; --font-mono: 'VT323', monospace;
        }
        html { -webkit-tap-highlight-color: transparent; }
        body { font-family: var(--font-main); overflow: hidden; background-color: #0d1117; color: var(--theme-text-general); height: 100vh; width: 100vw; margin: 0; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; }
        #interactive-bg-canvas { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; }
        .desktop-bg { position: relative; height: 100vh; width: 100vw; display: flex; flex-direction: column; align-items: center; justify-content: flex-end; box-sizing: border-box; }
        .window {
            position: absolute; min-width: 320px; min-height: 250px; resize: both; overflow: hidden;
            box-shadow: 0 25px 60px rgba(0, 0, 0, 0.6), 0 0 0 1px rgba(255, 255, 255, 0.1);
            border: 1px solid var(--theme-window-border); background-color: var(--theme-window-bg);
            backdrop-filter: blur(24px) saturate(180%); z-index: 100;
            transition: opacity 0.35s cubic-bezier(0.4, 0, 0.2, 1), transform 0.35s cubic-bezier(0.4, 0, 0.2, 1), box-shadow 0.35s ease, border-color 0.35s ease;
            opacity: 0; transform: scale(0.95) translateY(20px); display: none; flex-direction: column; border-radius: 12px;
        }
        .window.active-border { border-color: var(--theme-accent); box-shadow: 0 0 35px -5px var(--theme-accent-glow), 0 0 15px -5px var(--theme-accent-glow), 0 25px 70px rgba(0,0,0,0.8); }
        .window-header { cursor: grab; background: linear-gradient(180deg, var(--theme-window-header-bg-start), var(--theme-window-header-bg-end)); color: var(--theme-text-on-primary); text-shadow: 0 1px 2px rgba(0, 0, 0, 0.4); border-bottom: 1px solid var(--theme-window-border); padding: 0.7rem 1rem; border-top-left-radius: 12px; border-top-right-radius: 12px; display: flex; align-items: center; justify-content: space-between; flex-shrink: 0; }
        .window-header-button { background: rgba(255, 255, 255, 0.1); border: none; transition: background-color 0.2s, transform 0.1s; border-radius: 50%; width: 24px; height: 24px; display: flex; align-items: center; justify-content: center; }
        .window-header-button:hover { background: rgba(255, 255, 255, 0.2); transform: scale(1.1); } .window-header-button:active { transform: scale(0.95); } .window-header-button.close:hover { background-color: #e74c3c; } .window-header-button i { font-size: 0.65rem; }
        .window-content { flex-grow: 1; overflow: auto; padding: 0; }
        @keyframes app-intro { 0% { transform: translateY(30px) scale(0.95); opacity: 0; filter: blur(5px); } 100% { transform: translateY(0) scale(1); opacity: 1; filter: blur(0px); } }
        .app-entering > * { animation: app-intro 0.6s 0.1s cubic-bezier(0.2, 0.8, 0.2, 1) both; }
        #icon-dock { display: flex; gap: 16px; padding: 12px 20px; background-color: var(--theme-icon-dock-bg); backdrop-filter: blur(18px) saturate(160%); border-radius: 20px; box-shadow: 0 12px 35px rgba(0,0,0,0.5), inset 0 0 0 1.5px var(--theme-icon-dock-border); z-index: 150; position: fixed; bottom: 30px; left: 50%; transform: translateX(-50%); transition: transform 0.4s cubic-bezier(0.2, 0.8, 0.2, 1); }
        .icon-item { width: 60px; height: 60px; display: flex; flex-direction: column; align-items: center; justify-content: center; color: var(--theme-desktop-icon-color); cursor: pointer; border-radius: 10px; background-color: transparent; transition: transform 0.2s cubic-bezier(0.25, 0.46, 0.45, 0.94), background-color 0.2s ease-out; user-select: none; }
        .icon-item i { font-size: 2rem; margin-bottom: 0.3rem; transition: transform 0.3s ease; }
        .icon-item:hover { transform: translateY(-8px); background-color: var(--theme-desktop-icon-bg-hover); } .icon-item:hover i { transform: scale(1.1); } .icon-item:active { transform: translateY(-4px) scale(0.95); }
        #taskbar { position: fixed; top: 10px; right: 10px; width: auto; background-color: var(--theme-taskbar-bg); backdrop-filter: blur(15px) saturate(150%); z-index: 199; padding: 8px 12px; border-radius: 10px; box-shadow: 0 5px 20px rgba(0, 0, 0, 0.4); display: flex; align-items: center; gap: 8px; }
        .taskbar-icon, .taskbar-control { width: 38px; height: 38px; display: flex; align-items: center; justify-content: center; background-color: transparent; border-radius: 8px; cursor: pointer; transition: all 0.2s; border: 1px solid transparent; color: var(--theme-taskbar-icon-color); }
        .taskbar-icon:hover, .taskbar-control:hover { background-color: rgba(255, 255, 255, 0.1); } .taskbar-icon.active { background-color: var(--theme-taskbar-icon-active-bg); border-color: var(--theme-taskbar-icon-active-border); color: var(--theme-taskbar-icon-active-color); }
        #taskbar-clock { color: var(--theme-text-general-muted); font-size: 0.8rem; font-weight: 500; margin-left: 8px; }
        #audio-popup { display: none; position: fixed; right: 10px; top: 60px; background-color: var(--theme-taskbar-bg); padding: 12px; border-radius: 8px; box-shadow: 0 8px 25px rgba(0,0,0,0.5); z-index: 198; }
        #audio-visualizer-container { position: fixed; bottom: 0; left: 0; width: 100%; height: 50px; pointer-events: none; opacity: 0.6; }
        .terminal-output { background-color: rgba(13, 17, 23, 0.9); color: #2ecc71; font-family: var(--font-mono); font-size: 1.1rem; white-space: pre-wrap; overflow-y: auto; border-radius: 0; padding: 1rem; line-height: 1.6; flex-grow: 1; }
        .terminal-input { background-color: transparent; color: #2ecc71; font-family: var(--font-mono); font-size: 1.1rem; border: none; outline: none; width: calc(100% - 1.5rem); padding: 0.5rem; margin-left: 0.5rem; }
        /* Estilos de Apps */
        #spotify-content { background: linear-gradient(to top, #121212 50%, #1d2a38); }
        #amigos-content { display: flex; } #journey-content { background: #000; }
        #about-content { background: #121212; } #projects-content { background: #030303; }
        #hobbies-content { background: #1D2226; color: var(--theme-text-on-primary); }
        @media (max-width: 767px) {
            body { -webkit-text-size-adjust: 100%; }
            .desktop-bg { justify-content: flex-start; }
            .window { width: 100% !important; height: 100% !important; top: 0 !important; left: 0 !important; border-radius: 0 !important; border: none !important; box-shadow: none !important; resize: none !important; transform: translateX(100%); opacity: 1; }
            .window.open { transform: translateX(0%); }
            .window-header { border-radius: 0; padding-top: calc(env(safe-area-inset-top, 0) + 0.7rem); padding-left: calc(env(safe-area-inset-left, 0) + 1rem); padding-right: calc(env(safe-area-inset-right, 0) + 1rem); }
            #icon-dock { width: 90%; max-width: 500px; left: 50%; bottom: 20px; transform: translateX(-50%); padding: 8px; justify-content: space-around; overflow-x: auto; }
            #icon-dock.hidden-mobile { transform: translateX(-50%) translateY(150%); }
            #taskbar { display: none; } 
            #amigos-content { flex-direction: column; }
            #amigos-content > aside, #amigos-content > main { width: 100% !important; }
            #amigos-content > main { display: none; }
            #amigos-content.chat-view > aside { display: none; }
            #amigos-content.chat-view > main { display: flex; }
            #journey-content .h-3\/5 { height: 50%; } 
            #journey-content h1 { font-size: 2.5rem; }
            #projects-content > .flex { flex-direction: column; }
            #projects-content aside { display: none; }
            #projects-content .pr-4 { padding-right: 0; }
        }
    </style>
</head>
<body>
    <canvas id="interactive-bg-canvas"></canvas>
    <div id="desktop" class="desktop-bg">
        <div id="icon-dock"></div>
        <div id="audio-visualizer-container"><canvas id="audio-visualizer"></canvas></div>
    </div>
    <div id="youtube-player-container" style="position: absolute; top: -9999px; left: -9999px;"><div id="youtube-player"></div></div>

    <!-- JANELAS COMPLETAS -->
    <div id="spotify-window" class="window"><div class="window-header"><span><i class="fab fa-spotify mr-2"></i>Spotify</span><div class="flex space-x-2 window-controls"><button class="window-header-button close-button close"><i class="fas fa-times"></i></button></div></div><div id="spotify-content" class="window-content"></div></div>
    <div id="projects-window" class="window"><div class="window-header"><span><i class="fas fa-rocket mr-2"></i>Projetos</span><div class="flex space-x-2 window-controls"><button class="window-header-button close-button close"><i class="fas fa-times"></i></button></div></div><div id="projects-content" class="window-content"></div></div>
    <div id="about-window" class="window"><div class="window-header"><span><i class="fas fa-user-astronaut mr-2"></i>Perfil</span><div class="flex space-x-2 window-controls"><button class="window-header-button close-button close"><i class="fas fa-times"></i></button></div></div><div id="about-content" class="window-content"></div></div>
    <div id="my-journey-window" class="window"><div class="window-header"><span><i class="fas fa-film mr-2"></i>Jornada</span><div class="flex space-x-2 window-controls"><button class="window-header-button close-button close"><i class="fas fa-times"></i></button></div></div><div id="journey-content" class="window-content"></div></div>
    <div id="hobbies-window" class="window"><div class="window-header"><span><i class="fas fa-book-reader mr-2"></i>Skills</span><div class="flex space-x-2 window-controls"><button class="window-header-button close-button close"><i class="fas fa-times"></i></button></div></div><div id="hobbies-content" class="window-content"></div></div>
    <div id="amigos-window" class="window"><div class="window-header"><span><i class="fas fa-comments mr-2"></i>Chat</span><div class="flex space-x-2 window-controls"><button class="window-header-button close-button close"><i class="fas fa-times"></i></button></div></div><div id="amigos-content" class="window-content"></div></div>
    <div id="about-os-window" class="window"><div class="window-header"><span><i class="fab fa-galactic-republic mr-2"></i>Sobre DokasOS</span><div class="flex space-x-2 window-controls"><button class="window-header-button close-button close"><i class="fas fa-times"></i></button></div></div><div class="window-content p-6"><div class="app-entering"><h2 class="text-2xl font-bold mb-2 text-center">DokasOS "Edição Final"</h2><p class="text-center text-sm mb-3">Versão: <span id="os-version">6.0</span></p><hr class="border-[var(--theme-window-border)] my-4"><h3 class="text-lg font-semibold mb-2">Histórico de Versões:</h3><ul id="changelog-list" class="list-disc list-inside text-sm ml-4 mb-3 max-h-48 overflow-y-auto"></ul></div></div></div>
    <div id="dokas-assistant-prompt-window" class="window" style="resize: none;"><div class="window-header"><span><i class="fas fa-robot mr-2"></i>Dokas Assistente</span><div class="flex space-x-2 window-controls"><button class="window-header-button close-button close"><i class="fas fa-times"></i></button></div></div><div id="dokas-assistant-content" class="window-content flex flex-col items-center justify-center text-center"></div></div>
    <div id="extras-window" class="window"><div class="window-header"><span><i class="fas fa-terminal mr-2"></i>Terminal</span><div class="flex space-x-2 window-controls"><button class="window-header-button close-button close"><i class="fas fa-times"></i></button></div></div><div class="window-content p-0 flex flex-col h-full bg-black/50"><div id="terminal-output" class="terminal-output"></div><div class="flex items-center p-2 border-t border-[rgba(255,255,255,0.1)]"><span class="text-[#2ecc71] font-bold">C:\></span><input type="text" id="terminal-input" class="terminal-input" autofocus></div></div></div>
    <div id="taskbar"><div id="taskbar-weather" class="taskbar-control text-xs flex items-center gap-2"></div><div id="audio-control" class="taskbar-control"><i class="fas fa-volume-off"></i></div><div id="taskbar-clock"></div></div>
    <div id="audio-popup"><input type="range" min="0" max="100" value="15" id="volume-slider"></div>
    
    <script>
    document.addEventListener('DOMContentLoaded', () => {

    const InteractiveWallpaper = {
        canvas: document.getElementById('interactive-bg-canvas'), ctx: null, particles: [],
        mouse: { x: null, y: null, radius: 150 },
        init() { if (!this.canvas) return; this.ctx = this.canvas.getContext('2d'); this.handleResize(); window.addEventListener('resize', () => this.handleResize()); window.addEventListener('mousemove', e => { this.mouse.x = e.clientX; this.mouse.y = e.clientY; }); window.addEventListener('mouseout', () => { this.mouse.x = null; this.mouse.y = null; }); this.animate(); },
        handleResize() { this.canvas.width = window.innerWidth; this.canvas.height = window.innerHeight; this.particles = []; let num = (this.canvas.width * this.canvas.height) / 9000; for (let i = 0; i < num; i++) this.createParticle(); },
        createParticle() { this.particles.push({ x: Math.random() * this.canvas.width, y: Math.random() * this.canvas.height, dirX: (Math.random() * 0.4) - 0.2, dirY: (Math.random() * 0.4) - 0.2, size: Math.random() * 2 + 1 }); },
        drawDokasText() { this.ctx.font = 'bold 15vw Inter, sans-serif'; this.ctx.fillStyle = 'rgba(255, 255, 255, 0.03)'; this.ctx.textAlign = 'center'; this.ctx.textBaseline = 'middle'; this.ctx.fillText('Dokas', this.canvas.width / 2, this.canvas.height / 2); },
        animate() {
            requestAnimationFrame(() => this.animate());
            this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height); this.drawDokasText();
            const accentColor = getComputedStyle(document.documentElement).getPropertyValue('--theme-accent').trim();
            for (let i = 0; i < this.particles.length; i++) {
                const p = this.particles[i]; p.x += p.dirX; p.y += p.dirY;
                if (p.x < 0 || p.x > this.canvas.width) p.dirX *= -1; if (p.y < 0 || p.y > this.canvas.height) p.dirY *= -1;
                this.ctx.beginPath(); this.ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2); this.ctx.fillStyle = accentColor; this.ctx.fill();
                let dxMouse = this.mouse.x - p.x; let dyMouse = this.mouse.y - p.y; let distMouse = Math.sqrt(dxMouse*dxMouse + dyMouse*dyMouse);
                if (distMouse < this.mouse.radius) { this.ctx.beginPath(); this.ctx.strokeStyle = `rgba(26, 188, 156, ${1 - distMouse / this.mouse.radius})`; this.ctx.lineWidth = 0.5; this.ctx.moveTo(this.mouse.x, this.mouse.y); this.ctx.lineTo(p.x, p.y); this.ctx.stroke(); }
                for (let j = i; j < this.particles.length; j++) {
                    const p2 = this.particles[j]; let dist = Math.sqrt(Math.pow(p.x - p2.x, 2) + Math.pow(p.y - p2.y, 2));
                    if (dist < 100) { this.ctx.beginPath(); this.ctx.strokeStyle = `rgba(26, 188, 156, ${1 - dist / 100})`; this.ctx.lineWidth = 0.3; this.ctx.moveTo(p.x, p.y); this.ctx.lineTo(p2.x, p2.y); this.ctx.stroke(); }
                }
            }
        }
    };

    const Config = {
        localStorageKeys: { windowStates: 'dokasOsWindowStates_v18', volume: 'dokasOsVolume_v15'},
        ytPlayer: { videoId: 'XhBrigOWvUQ', initialVolume: 15 },
        iconData: [
            { id: 'about-icon', windowId: 'about-window', faClass: 'fas fa-user-astronaut', text: 'Perfil' }, { id: 'projects-icon', windowId: 'projects-window', faClass: 'fas fa-rocket', text: 'Projetos' },
            { id: 'my-journey-icon', windowId: 'my-journey-window', faClass: 'fas fa-film', text: 'Jornada'}, { id: 'hobbies-icon', windowId: 'hobbies-window', faClass: 'fas fa-book-reader', text: 'Skills'},
            { id: 'amigos-icon', windowId: 'amigos-window', faClass: 'fas fa-comments', text: 'Amigos'}, { id: 'spotify-icon', windowId: 'spotify-window', faClass: 'fab fa-spotify', text: 'Música' },
            { id: 'extras-icon', windowId: 'extras-window', faClass: 'fas fa-terminal', text: 'Terminal' },
        ],
        changelogEntries: [ "v6.0 'Edição Final': Lançamento com compatibilidade mobile total e refinamentos finais.", "v5.2 'Jornada Reescrita': Narrativa e visuais da Jornada aprimorados.", "v5.1 'Refinamento Prestige': Feedback incorporado.", "v5.0 'Edição Prestige': Redesign completo dos apps.", "v4.0 'A Sublimação Estética': Redesign inicial.", "v3.0 'A Restauração Completa': Funcionalidade restaurada.", "v2.0 'O Despertar da Consciência': UI remodelada.", "v1.0 'O Nascimento da Tragédia': Lançamento." ],
        spotifyPlaylists: [{ name: "Chega de Derrotas 🎧", coverUrl: "https://i.pinimg.com/736x/01/85/0a/01850a3a912785833ccf73d07678cae6.jpg", spotifyUrl: "https://open.spotify.com/playlist/0hWOBR1EcHqx2tBkfFn4MS", artist: "Dokas", duration: "3:45" }, { name: "Até a Validação 💻", coverUrl: "https://i.pinimg.com/736x/d4/be/45/d4be45b1ff5e8c4ab33ab95daa12addd.jpg", spotifyUrl: "https://open.spotify.com/playlist/1qysrUbhbrMhIPEEda15rd", artist: "Dokas", duration: "4:20" }, { name: "Work, Times Up 📻", coverUrl: "https://i.pinimg.com/736x/aa/8c/cb/aa8ccbfc49fef2699aeb979bf4bb2d7f.jpg", spotifyUrl: "https://open.spotify.com/playlist/3nIIIw2hFU9fvqTjZHf8Lg", artist: "Dokas", duration: "2:55" }, ],
        projects: [{ id: 1, title: "Site de reflexões", community: "r/SideProject", author: "u/dokas", points: 1337, comments: 42, description: "Um site que serve de anotações, totalmente feito no localstorage...", imageUrl: "https://i.pinimg.com/736x/0e/2c/ad/0e2cad9b359cae21c8655b155f9351d6.jpg", demoLink: "https://holy-southern-bridge.glitch.me/" }],
        aboutContent: { photoUrl: "https://i.pinimg.com/736x/fe/ca/df/fecadf4ed575f1ed39260f532619d77d.jpg", username: "dokas.dev", posts: 6, followers: 404, following: 8, bio: `Sou Dokas, um cara qualquer das interwebis que acredita na filosofia do seguinte pressuposto, "se tudo der errado, pelo menos posso fazer piadas disso".`, projectHighlight: { title: "Site de Anotações", image: "https://i.pinimg.com/736x/0e/2c/ad/0e2cad9b359cae21c8655b155f9351d6.jpg", demoLink: "https://holy-southern-bridge.glitch.me/" } },
        journeyEntries: [
            { id: 1, season: 1, episode: 1, title: "2007", description: "Assim nasceu João, uma pessoa destinada a navegar as complexidades do mundo digital. O início foi silencioso, um prelúdio para uma jornada de autodescoberta e criação, ainda sem a persona que o definiria.", image: "https://i.pinimg.com/736x/29/3d/73/293d73b02884cbc643e2862e931c2a92.jpg", icon: "fa-seedling" }, 
            { id: 2, season: 1, episode: 2, title: "Começo da Jornada", description: "O som de um modem discado foi o portal para um universo paralelo. O primeiro contato com a internet não foi apenas sobre descobrir sites, mas sobre encontrar uma nova forma de se expressar e se conectar, dando início a uma fascinação duradoura pela tecnologia.", image: "https://i.pinimg.com/736x/64/d6/97/64d697d8b7e82d6bc0e64afb61de14da.jpg", icon: "fa-wifi" }, 
            { id: 3, season: 2, episode: 1, title: "Filho Pródigo", description: "Após explorar diversos caminhos, houve um retorno inevitável à sua vocação original: a criação. A edição de vídeos e o entusiasmo genuíno em ajudar pessoas com seus próprios projetos reacenderam a centelha. A família, especialmente os ensinamentos de avó e mãe, foi o alicerce que o manteve de pé, garantindo que na vida, por mais difícil que fosse, sempre era possível dar um nó e seguir em frente.", image: "https://i.pinimg.com/736x/f8/fa/38/f8fa3869b173393cde734226573099d3.jpg", icon: "fa-film" }, 
            { id: 4, season: 2, episode: 2, title: "Evolução em Massa", description: "A paixão pela criação transcendeu as ferramentas visuais. As linhas de código tornaram-se o novo pincel. A automação em Python e a arquitetura de sistemas complexos representaram um salto quântico, uma evolução da expressão criativa para a lógica e a função.", image: "https://i.pinimg.com/736x/1b/d8/38/1bd838c7669dbb652d03ec21d0dc9573.jpg", icon: "fa-brain" },
            { id: 5, season: 2, episode: 3, title: "Aprendendo com os Erros", description: "Surgiu o alter ego 'Doquinha', que evoluiu para 'Dokas'. Uma persona criada para navegar os espaços online, mas que, com o tempo, tomou atitudes que levaram ao arrependimento. Este capítulo foi um confronto com o próprio ego e o início de um profundo desapego por esse nome.", image: "https://i.pinimg.com/736x/b4/ed/22/b4ed22b713ca63ccff4906a38ea6ba36.jpg", icon: "fa-mask" },
            { id: 6, season: 3, episode: 1, title: "Aprendizado", description: "O ponto de virada. A decisão de abandonar a persona 'Dokas' e voltar à realidade. Cada erro, cada 'murro', serviu como uma lição valiosa. A vida voltou ao normal, mas transformada, com um foco renovado em ajudar quem está por perto e crescer com cada experiência.", image: "https://i.pinimg.com/736x/87/67/6e/87676eafc8ea3d3fbd34780918d404a7.jpg", icon: "fa-hand-holding-heart" },
            { id: 7, season: 3, episode: 2, title: "Continuação do Roteirista", description: "A narrativa está longe de terminar. Cada novo dia é uma cena, cada projeto um arco. O futuro permanece um roteiro aberto, com o café como combustível para as longas noites de escrita, garantindo que a história continue a ser contada.", image: "https://i.pinimg.com/736x/ec/93/2d/ec932dd42c0693e28b482c018a6a094d.jpg", icon: "fa-pen-fancy" }
        ],
        hobbiesData: [{ icon: 'fa-music', name: 'Música', description: 'Gosto muito de Yun Li, Kanye West e Eminem, artistas favoritos.' }, { icon: 'fa-gamepad', name: 'Games', description: 'Jogo muito Dead by Daylight (DBD) e outros jogos por aí.' }, { icon: 'fa-code', name: 'Programação', description: 'Gosto muito de automação em Python e diversas outras criações.' }, { icon: 'fa-book-reader', name: 'Leitura', description: 'Curto alguns livros e já li alguns, como "O Mundo de Sofia" e outros por aí.' }, { icon: 'fa-brain', name: 'Aprender Coisas Novas', description: 'Gosto de aprender, cada queda o pai usa de mochila a jato para subir.' }, { icon: 'fa-comments', name: 'Conversas Aleatórias', description: 'Sou um rapaz aleatório demais, só que na minha. Sou difícil de comunicação, não manjo dos papos.'} ],
        amigosData: [
            { id: 1, nome: "Vx", status: "DBD", avatar: "https://placehold.co/100x100/2ecc71/ffffff?text=V" }, 
            { id: 2, nome: "Felipe", status: "Breaking bad>>>>BCS", avatar: "https://placehold.co/100x100/3498db/ffffff?text=F" }, 
            { id: 3, nome: "Gustavo", status: "I Am Kanye west", avatar: "https://placehold.co/100x100/f1c40f/ffffff?text=G"},
            { id: 4, nome: "Falecido Gaviota", status: "Em memória (Luto)", avatar: "https://placehold.co/100x100/95a5a6/ffffff?text=G" },
            { id: 5, nome: "Cleiton", status: "Bola pra toda obra", avatar: "https://placehold.co/100x100/e67e22/ffffff?text=C" },
            { id: 6, nome: "Heitor", status: "sem tempo", avatar: "https://placehold.co/100x100/e74c3c/ffffff?text=H" },
            { id: 7, nome: "Dave", status: "Quem nasceu para ser Oh Shit, nunca será Very Good!", avatar: "https://placehold.co/100x100/9b59b6/ffffff?text=D" },
            { id: 8, nome: "Arthur", status: "vagabundo", avatar: "https://placehold.co/100x100/34495e/ffffff?text=A" },
            { id: 9, nome: "Mizuna Poggers", status: "Desaparecida (Saudades!)", avatar: "https://placehold.co/100x100/1abc9c/ffffff?text=M" }
        ],
        terminalCommands: {},
    };

    const AppState = { activeWindow: null, zIndexCounter: 100, openWindows: {}, windowStates: JSON.parse(localStorage.getItem(Config.localStorageKeys.windowStates)) || {}, isAudioPlaying: false, ytPlayer: null, spotifyCurrentIndex: 0 };
    const DOM = {
        allWindows: document.querySelectorAll('.window'), taskbar: document.getElementById('taskbar'),
        iconDock: document.getElementById('icon-dock'),
        terminalOutput: document.getElementById('terminal-output'), terminalInput: document.getElementById('terminal-input'),
        audioControl: document.getElementById('audio-control'), audioPopup: document.getElementById('audio-popup'),
        volumeSlider: document.getElementById('volume-slider'), audioVisualizerCanvas: document.getElementById('audio-visualizer'),
    };
    if (DOM.audioVisualizerCanvas) DOM.visualizerCtx = DOM.audioVisualizerCanvas.getContext('2d');

    const Utils = {
        typeTextEffect(target, text, speed = 15, callback) {
            let i = 0;
            const currentHTML = target.innerHTML;
            target.innerHTML = currentHTML + '\n';
            function type() {
                if (i < text.length) {
                    target.innerHTML += text.charAt(i).replace(/\n/g, '<br>');
                    i++;
                    target.scrollTop = target.scrollHeight;
                    setTimeout(type, speed);
                } else if (callback) {
                    callback();
                }
            }
            type();
        },
    };

    const SoundManager = {
        sounds: {}, isReady: false,
        init() {
            const startAudio = () => {
                if(this.isReady) return;
                Tone.start().then(() => { this.loadSounds(); this.isReady = true; console.log("Contexto de Áudio pronto."); }).catch(e => console.error("Erro ao iniciar Tone.js:", e));
                document.body.removeEventListener('click', startAudio, { once: true });
            };
            document.body.addEventListener('click', startAudio, { once: true });
        },
        loadSounds() {
            this.sounds.open = new Tone.Synth({ oscillator: { type: 'sine' }, envelope: { attack: 0.01, decay: 0.2, sustain: 0.1, release: 0.5 } }).toDestination();
            this.sounds.close = new Tone.Synth({ oscillator: { type: 'triangle' }, envelope: { attack: 0.01, decay: 0.3, sustain: 0, release: 0.3 } }).toDestination();
            this.sounds.click = new Tone.MembraneSynth({ pitchDecay: 0.01, octaves: 4, envelope: { attack: 0.001, decay: 0.1, sustain: 0 } }).toDestination();
            this.sounds.error = new Tone.Synth({ oscillator: { type: 'square' }, envelope: { attack: 0.02, decay: 0.3, sustain: 0, release: 0.1 } }).toDestination();
            this.sounds.change = new Tone.Synth({ oscillator: { type: 'fatsawtooth', count: 3, spread: 20 }, envelope: { attack: 0.01, decay: 0.1, sustain: 0.2, release: 0.1 } }).toDestination();
        },
        play(sound, note = 'C4', duration = '8n') { if (this.isReady && this.sounds[sound]) this.sounds[sound].triggerAttackRelease(note, duration); }
    };
    
    const WindowManager = {
        init() { DOM.allWindows.forEach(win => this.setupWindowControls(win)); document.body.addEventListener('mousedown', e => { if (e.target.closest('.window')) this.bringToFront(e.target.closest('.window')); }); },
        setupWindowControls(win) { const header = win.querySelector('.window-header'); const closeBtn = win.querySelector('.close-button'); if (header) this.makeWindowDraggable(win, header); if (closeBtn) closeBtn.addEventListener('click', e => { e.stopPropagation(); this.close(win); }); },
        open(windowId) {
            const win = document.getElementById(windowId); if (!win) return;
            const defaultSizes = {
                'about-window': { width: '800px', height: '650px' }, 'projects-window': { width: '850px', height: '600px' },
                'spotify-window': { width: '420px', height: '600px' }, 'extras-window': { width: '680px', height: '450px' },
                'dokas-assistant-prompt-window': { width: '420px', height: '280px' }, 'my-journey-window': { width: '850px', height: '650px' },
                'hobbies-window': { width: '650px', height: '580px' }, 'amigos-window': { width: '800px', height: '600px' },
                'about-os-window': { width: '480px', height: '440px' },
            };
            const isMobile = window.innerWidth <= 767; const savedState = AppState.windowStates[windowId];
            if (!isMobile) {
                const size = defaultSizes[windowId] || { width: '50vw', height: '60vh' };
                win.style.width = savedState?.width || size.width; win.style.height = savedState?.height || size.height;
                if (savedState?.top && savedState?.left) { win.style.top = savedState.top; win.style.left = savedState.left; } 
                else { win.style.top = `calc(50% - ${parseInt(win.style.height)/2}px)`; win.style.left = `calc(50% - ${parseInt(win.style.width)/2}px + ${Math.random()*100-50}px)`; }
            }
            win.style.display = 'flex'; this.bringToFront(win);
            const appContent = win.querySelector('.window-content');
            if(appContent.firstChild) {
                appContent.firstChild.classList.remove('app-entering');
                void appContent.firstChild.offsetWidth; 
                appContent.firstChild.classList.add('app-entering');
            }
            requestAnimationFrame(() => { win.classList.add('open'); if (!isMobile) { win.style.opacity = '1'; win.style.transform = 'scale(1) translateY(0px)'; } });
            if (!AppState.openWindows[windowId]) DesktopManager.createTaskbarIcon(win);
            DesktopManager.updateTaskbarActiveState(windowId); SoundManager.play('open', 'C5', '16n');
            if (isMobile) DOM.iconDock.classList.add('hidden-mobile');
        },
        close(win) {
            this.saveState(win); const isMobile = window.innerWidth <= 767; win.classList.remove('open');
            if (!isMobile) { win.style.opacity = '0'; win.style.transform = 'scale(0.95) translateY(20px)'; }
            SoundManager.play('close', 'F3', '16n');
            setTimeout(() => {
                win.style.display = 'none'; const windowId = win.id; if (AppState.openWindows[windowId]?.taskbarIcon) AppState.openWindows[windowId].taskbarIcon.remove();
                delete AppState.openWindows[windowId]; if (AppState.activeWindow?.id === windowId) { AppState.activeWindow = null; DesktopManager.updateTaskbarActiveState(null); }
                if (isMobile && Object.keys(AppState.openWindows).length === 0) {
                    DOM.iconDock.classList.remove('hidden-mobile');
                }
            }, 350);
        },
        bringToFront(win) { if (AppState.activeWindow?.id === win.id) return; AppState.zIndexCounter++; win.style.zIndex = AppState.zIndexCounter; DOM.allWindows.forEach(w => w.classList.remove('active-border')); win.classList.add('active-border'); AppState.activeWindow = win; DesktopManager.updateTaskbarActiveState(win.id); },
        saveState(win) { if (!win?.id || window.innerWidth <= 767) return; AppState.windowStates[win.id] = { width: win.style.width, height: win.style.height, top: win.style.top, left: win.style.left }; localStorage.setItem(Config.localStorageKeys.windowStates, JSON.stringify(AppState.windowStates)); },
        makeWindowDraggable(win, header) {
            let isDragging = false, offsetX, offsetY;
            const onMove = (x, y) => { if (isDragging) { win.style.left = `${x - offsetX}px`; win.style.top = `${y - offsetY}px`; }};
            const onEndDrag = () => { if (isDragging) { isDragging = false; header.style.cursor = 'grab'; this.saveState(win); document.removeEventListener('mousemove', onMouseMove); document.removeEventListener('mouseup', onEndDrag);}};
            const onMouseMove = e => onMove(e.clientX, e.clientY);
            header.addEventListener('mousedown', e => { if (e.target.closest('.window-header-button') || window.innerWidth <= 767) return; isDragging = true; offsetX = e.clientX - win.getBoundingClientRect().left; offsetY = e.clientY - win.getBoundingClientRect().top; header.style.cursor = 'grabbing'; this.bringToFront(win); document.addEventListener('mousemove', onMouseMove); document.addEventListener('mouseup', onEndDrag); });
        },
    };
    const DesktopManager = {
        init() { this.populateIconDock(); this.initClock(); this.initWeather(); this.initAudioControls(); },
        populateIconDock() { DOM.iconDock.innerHTML = Config.iconData.map(data => `<div class="icon-item" id="${data.id}" data-window="${data.windowId}" title="${data.text}"><i class="${data.faClass}"></i></div>`).join(''); document.querySelectorAll('.icon-item').forEach(icon => icon.addEventListener('click', () => { SoundManager.play('click', 'G5', '32n'); WindowManager.open(icon.dataset.window); })); },
        createTaskbarIcon(win) { const windowId = win.id; const iconClass = win.querySelector('.window-header i')?.className || 'fas fa-window-maximize'; const taskbarIcon = document.createElement('div'); taskbarIcon.className = 'taskbar-icon'; taskbarIcon.dataset.windowId = windowId; taskbarIcon.innerHTML = `<i class="${iconClass}"></i>`; taskbarIcon.addEventListener('click', () => { (win.style.display === 'none' || win.style.opacity === '0') ? WindowManager.open(windowId) : WindowManager.bringToFront(win); }); if (DOM.taskbar) DOM.taskbar.insertBefore(taskbarIcon, DOM.taskbar.firstChild); AppState.openWindows[windowId] = { element: win, taskbarIcon }; },
        updateTaskbarActiveState(activeId) { if(DOM.taskbar) document.querySelectorAll('.taskbar-icon').forEach(icon => icon.classList.toggle('active', icon.dataset.windowId === activeId)); },
        initClock() { const update = () => { if (DOM.taskbar && DOM.taskbarClock) DOM.taskbarClock.textContent = new Date().toLocaleTimeString('pt-BR', { hour: '2-digit', minute: '2-digit' }); }; setInterval(update, 1000); update(); },
        initWeather() { const el = document.getElementById('taskbar-weather'); if (el) { const temp = 18 + Math.floor(Math.random() * 8); el.innerHTML = `<i class="fas fa-cloud-sun"></i><span>${temp}°C</span>`; } },
        initAudioControls() { if(DOM.audioControl) DOM.audioControl.addEventListener('click', (e) => { e.stopPropagation(); DOM.audioPopup.style.display = DOM.audioPopup.style.display === 'flex' ? 'none' : 'flex'; }); if(DOM.volumeSlider) DOM.volumeSlider.addEventListener('input', e => YouTubePlayerManager.setVolume(Number(e.target.value))); document.addEventListener('click', e => { if (DOM.audioControl && !DOM.audioControl.contains(e.target) && DOM.audioPopup && !DOM.audioPopup.contains(e.target)) DOM.audioPopup.style.display = 'none'; }); }
    };
    const YouTubePlayerManager = {
        init() { if (window.YT && window.YT.Player) this.onYouTubeIframeAPIReady(); else window.onYouTubeIframeAPIReady = this.onYouTubeIframeAPIReady.bind(this); },
        onYouTubeIframeAPIReady() { AppState.ytPlayer = new YT.Player('youtube-player', { height: '0', width: '0', videoId: Config.ytPlayer.videoId, playerVars: { 'autoplay': 1, 'controls': 0, 'loop': 1, 'playlist': Config.ytPlayer.videoId }, events: { 'onReady': this.onPlayerReady.bind(this), 'onStateChange': this.onPlayerStateChange.bind(this) } }); },
        onPlayerReady(event) { const savedVolume = localStorage.getItem(Config.localStorageKeys.volume) || Config.ytPlayer.initialVolume; this.setVolume(Number(savedVolume)); if(DOM.volumeSlider) DOM.volumeSlider.value = savedVolume; event.target.playVideo(); },
        onPlayerStateChange(event) { AppState.isAudioPlaying = (event.data === YT.PlayerState.PLAYING); if(DOM.audioControl) DOM.audioControl.innerHTML = `<i class="fas ${AppState.isAudioPlaying ? 'fa-volume-high' : 'fa-volume-off'}"></i>`; if (AppState.isAudioPlaying) AudioVisualizer.start(); else AudioVisualizer.stop(); },
        setVolume(level) { if (AppState.ytPlayer) AppState.ytPlayer.setVolume(level); localStorage.setItem(Config.localStorageKeys.volume, level); if(DOM.audioControl) DOM.audioControl.innerHTML = `<i class="fas ${level > 50 ? 'fa-volume-high' : level > 0 ? 'fa-volume-low' : 'fa-volume-off'}"></i>`; }
    };
    const AudioVisualizer = {
        animationId: null,
        start() { if (!this.animationId && DOM.visualizerCtx) this.draw(); },
        stop() { if (this.animationId) { cancelAnimationFrame(this.animationId); this.animationId = null; } if (DOM.visualizerCtx) DOM.visualizerCtx.clearRect(0, 0, DOM.audioVisualizerCanvas.width, DOM.audioVisualizerCanvas.height); },
        draw() {
            if (!AppState.isAudioPlaying) { this.stop(); return; }
            const ctx = DOM.visualizerCtx; const canvas = DOM.audioVisualizerCanvas; const numBars = 16;
            ctx.clearRect(0, 0, canvas.width, canvas.height); const barWidth = canvas.width / numBars;
            for (let i = 0; i < numBars; i++) { const barHeight = Math.random() * canvas.height * 0.8 + canvas.height * 0.1; ctx.fillStyle = `rgba(26, 188, 156, ${0.3 + Math.random()*0.4})`; ctx.fillRect(i * barWidth, canvas.height - barHeight, barWidth - 2, barHeight); }
            this.animationId = requestAnimationFrame(this.draw.bind(this));
        }
    };
    const Terminal = {
        init() { this.populateCommands(); DOM.terminalOutput.innerHTML = "Bem-vindo ao Terminal DokasOS! Digite 'help'."; DOM.terminalInput.addEventListener('keydown', e => this.handleInput(e)); },
        populateCommands() {
            Config.terminalCommands = {
                help: () => this.printOutput(`Comandos: 'about', 'projects', 'contact', 'clear', 'dokasos', 'date', 'calc', 'fortune', 'neofetch'`), about: () => WindowManager.open('about-window'), projects: () => WindowManager.open('projects-window'),
                contact: () => this.printOutput('Discord: Dokquin'), clear: () => { DOM.terminalOutput.innerHTML = ''; },
                dokasos: () => WindowManager.open('about-os-window'), date: () => this.printOutput(new Date().toLocaleString('pt-BR')),
                calc: (args) => { if (!args.length) return this.printOutput('Uso: calc <expressão>'); try { this.printOutput(`Resultado: ${eval(args.join('').replace(/[^-()\d/*+.]/g, ''))}`); } catch (e) { this.printOutput(`Erro na expressão.`); } },
                fortune: () => this.printOutput(["Seu código compilará de primeira.", "A sorte favorece a mente preparada."][Math.floor(Math.random()*2)]),
                neofetch: () => { const uptime = Math.floor(performance.now() / 60000); const art = `\n<span style="color: var(--theme-accent);">dokas</span>@<span style="color: var(--theme-primary);">dokasos</span>\n---------\n<span style="color: var(--theme-accent);">OS</span>: DokasOS Edição Final\n<span style="color: var(--theme-accent);">Uptime</span>: ${uptime} mins\n<span style="color: var(--theme-accent);">Resolution</span>: ${window.innerWidth}x${window.innerHeight}\n<span style="color: var(--theme-accent);">Terminal</span>: dokas-shell`; DOM.terminalOutput.innerHTML += art.replace(/\n/g, '<br>'); this.addPrompt(); }
            };
        },
        handleInput(e) { if (e.key === 'Enter' && DOM.terminalInput.value) { const input = DOM.terminalInput.value.trim(); DOM.terminalOutput.innerHTML += `\n<span class="text-cyan-400">C:\\></span> ${input}`; DOM.terminalInput.value = ''; const [cmd, ...args] = input.toLowerCase().split(' '); const action = Config.terminalCommands[cmd]; if (action) action(args); else this.printOutput(`Comando '${cmd}' não reconhecido.`); } },
        printOutput(text) { SoundManager.play('click', 'A5', '64n'); Utils.typeTextEffect(DOM.terminalOutput, text, 10, () => this.addPrompt()); },
        addPrompt() { DOM.terminalOutput.scrollTop = DOM.terminalOutput.scrollHeight; }
    };
    
    const AppModules = {
        init() { Object.values(this).forEach(mod => mod.init && mod.init()); },
        AboutOS: { init() { const list = document.getElementById('changelog-list'); if (list) list.innerHTML = Config.changelogEntries.map(e => `<li>${e}</li>`).join(''); } },
        Spotify: { 
            init() { this.render(); },
            changeTrack(direction) {
                const len = Config.spotifyPlaylists.length;
                AppState.spotifyCurrentIndex = (AppState.spotifyCurrentIndex + direction + len) % len;
                SoundManager.play('change', 'A4', '16n'); this.render();
            },
            render() {
                const container = document.getElementById('spotify-content'); if (!container) return;
                const nowPlaying = Config.spotifyPlaylists[AppState.spotifyCurrentIndex];
                container.innerHTML = `<div class="p-6 flex flex-col h-full app-entering"><a href="${nowPlaying.spotifyUrl}" target="_blank"><img src="${nowPlaying.coverUrl}" class="w-full h-64 object-cover rounded-lg shadow-lg mb-4 cursor-pointer hover:scale-105 transition-transform duration-300"></a><div class="text-center"><h2 class="text-2xl font-bold">${nowPlaying.name}</h2><p class="text-md text-gray-400">${nowPlaying.artist}</p></div><div class="mt-4"><div class="h-1 bg-gray-700 rounded-full"><div class="h-1 bg-white rounded-full w-1/4"></div></div><div class="flex justify-between text-xs text-gray-400 mt-1"><span>0:58</span><span>${nowPlaying.duration}</span></div></div><div class="flex justify-center items-center gap-8 text-2xl my-4"><i id="spotify-prev" class="fas fa-backward-step text-gray-400 hover:text-white cursor-pointer"></i><div class="w-16 h-16 bg-white text-black rounded-full flex items-center justify-center text-3xl cursor-pointer hover:scale-105 transition-transform"><i class="fas fa-pause"></i></div><i id="spotify-next" class="fas fa-forward-step text-gray-400 hover:text-white cursor-pointer"></i></div><div class="flex-grow overflow-y-auto mt-4 border-t border-gray-700/50 pt-4"><h3 class="font-bold mb-2 px-2">Todas as Playlists</h3><div class="space-y-2">${Config.spotifyPlaylists.map(p => `<a href="${p.spotifyUrl}" target="_blank" class="flex items-center gap-4 p-2 rounded-md hover:bg-white/10"><img src="${p.coverUrl}" class="w-12 h-12 rounded object-cover"><div><p class="font-semibold text-white">${p.name}</p><p class="text-sm text-gray-400">${p.artist}</p></div></a>`).join('')}</div></div></div>`;
                document.getElementById('spotify-prev').addEventListener('click', () => this.changeTrack(-1));
                document.getElementById('spotify-next').addEventListener('click', () => this.changeTrack(1));
            }
        },
        Projects: { init() { const container = document.getElementById('projects-content'); if (!container) return; container.innerHTML = `<div class="p-4 flex h-full app-entering"><div class="w-full md:w-3/4 pr-4 overflow-y-auto">${Config.projects.map(p => `<div onclick="window.open('${p.demoLink}', '_blank')" class="mb-4 bg-gray-800/50 border border-gray-700 rounded-lg flex hover:border-purple-500 transition-colors cursor-pointer"><div class="flex flex-col items-center p-2 bg-black/20"><i class="fas fa-arrow-up cursor-pointer hover:text-orange-500"></i><span class="font-bold text-sm">${p.points}</span><i class="fas fa-arrow-down cursor-pointer hover:text-blue-500"></i></div><div class="p-4"><p class="text-xs text-gray-400">${p.community} • Postado por ${p.author}</p><h3 class="text-xl font-bold my-1">${p.title}</h3><p class="text-sm">${p.description}</p><div class="mt-3 flex gap-4 text-xs text-gray-400"><span class="hover:bg-gray-700 p-1 rounded cursor-pointer"><i class="fas fa-comment-alt mr-1"></i>${p.comments} Comentários</span><span class="hover:bg-gray-700 p-1 rounded cursor-pointer"><i class="fas fa-share mr-1"></i>Compartilhar</span></div></div></div>`).join('')}</div><div class="hidden md:block w-1/4 pl-4 border-l border-gray-700"><div class="bg-gray-800/50 p-4 rounded-lg"><h3 class="font-bold text-lg">Sobre a Comunidade</h3><p class="text-sm mt-2">Este é um portal para exibir os projetos mais recentes de Dokas, no estilo de um subreddit pessoal.</p></div></div></div>`; } },
        AboutMe: { init() { const c = Config.aboutContent; const container = document.getElementById('about-content'); if (!container) return; container.innerHTML = `<div class="p-6 app-entering"><header class="flex items-center mb-6"><img src="${c.photoUrl}" class="w-24 h-24 md:w-36 md:h-36 rounded-full border-4 border-gray-700 object-cover"><div class="ml-6"><h2 class="text-2xl font-light">${c.username}</h2><div class="flex gap-4 mt-2"><button class="bg-blue-500 text-white font-bold py-1 px-4 rounded">Seguir</button><button class="bg-gray-700 font-bold py-1 px-4 rounded">Mensagem</button></div></div></header><div class="text-left"><p class="font-bold">${c.username}</p><p>${c.bio}</p></div><div class="flex justify-around text-center my-6 border-y border-gray-800 py-3"><div class="w-full"><span class="font-bold">${c.posts}</span><br><span class="text-gray-400">publicações</span></div><div class="w-full"><span class="font-bold">${c.followers}</span><br><span class="text-gray-400">seguidores</span></div><div class="w-full"><span class="font-bold">${c.following}</span><br><span class="text-gray-400">seguindo</span></div></div><div class="text-sm font-bold my-4">DESTAQUE</div><a href="${c.projectHighlight.demoLink}" target="_blank" class="flex flex-col items-center"><div class="w-20 h-20 rounded-full border-2 border-purple-500 p-1"><img src="${c.projectHighlight.image}" class="w-full h-full object-cover rounded-full"></div><p class="mt-2 text-sm">${c.projectHighlight.title}</p></a></div>`; } },
        MyJourney: { 
            init() { this.render(1); },
            render(episodeId) {
                const container = document.getElementById('journey-content'); if (!container) return;
                const entry = Config.journeyEntries.find(e => e.id === episodeId) || Config.journeyEntries[0];
                container.innerHTML = `<div class="h-full flex flex-col app-entering"><div class="h-3/5 bg-cover bg-center flex items-end p-8 shadow-inner relative" style="background-image: linear-gradient(to top, #000 60%, transparent), url('${entry.image}')"><div class="z-10 w-full md:w-2/3"><div class="flex items-center gap-2 text-lg mb-2"><i class="fas ${entry.icon} text-[var(--theme-accent)]"></i><span>S${entry.season}:E${entry.episode}</span></div><h1 class="text-5xl font-black mb-2">${entry.title}</h1><p class="text-gray-300">${entry.description}</p><button class="mt-4 bg-white text-black font-bold py-2 px-6 rounded hover:bg-gray-200"><i class="fas fa-play mr-2"></i>Assistir Episódio</button></div></div><div class="flex-grow p-8 overflow-y-auto"><h2 class="text-2xl font-bold mb-4">Episódios</h2><div class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-4">${Config.journeyEntries.map(j => `<div class="cursor-pointer group episode-card" data-episode-id="${j.id}"><div class="aspect-video bg-gray-800 rounded-lg bg-cover bg-center overflow-hidden transform group-hover:scale-105 transition-transform relative"><img src="${j.image}" class="w-full h-full object-cover"><div class="absolute inset-0 bg-black/50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity"><i class="fas fa-play-circle text-4xl"></i></div></div><h4 class="font-bold mt-2">${j.title}</h4></div>`).join('')}</div></div></div>`;
                document.querySelectorAll('.episode-card').forEach(card => card.addEventListener('click', () => this.render(Number(card.dataset.episodeId))));
            }
        },
        Hobbies: {
            init() { const c = Config.aboutContent; const container = document.getElementById('hobbies-content'); if (!container) return; container.innerHTML = `<div class="flex flex-col md:flex-row h-full app-entering"><aside class="w-full md:w-1/3 p-6 border-r border-gray-700 flex-shrink-0 flex flex-col items-center text-center bg-gray-800"><img src="${c.photoUrl}" class="w-32 h-32 rounded-full mb-4 object-cover shadow-lg"><h2 class="text-2xl font-bold">Dokas</h2><p class="text-gray-400">Desenvolvedor & Criativo</p></aside><main class="flex-grow p-6 overflow-y-auto bg-gray-900"><div class="p-4 rounded-lg bg-black/20 border border-gray-700 mb-6"><h3 class="text-xl font-bold">Sobre</h3><p class="text-sm mt-2">${c.bio}</p></div><div class="p-4 rounded-lg bg-black/20 border border-gray-700"><h3 class="text-xl font-bold mb-4">Principais Competências</h3>${Config.hobbiesData.map(h => `<div class="flex items-center gap-4 mb-4"><i class="fas ${h.icon} fa-2x w-8 text-center text-[var(--theme-accent)]"></i><div><h4 class="font-bold">${h.name}</h4><p class="text-sm text-gray-400">${h.description}</p></div></div>`).join('')}</div></main></div>`; }
        },
        Amigos: {
            init() { this.renderChat(); },
            renderChat(activeId = 1) {
                const container = document.getElementById('amigos-content'); if (!container) return;
                const activeFriend = Config.amigosData.find(f => f.id === activeId) || Config.amigosData[0];
                container.innerHTML = `<div class="w-full h-full flex app-entering" id="amigos-container"><aside class="w-full md:w-1/3 bg-black/20 border-r border-gray-700/50 flex flex-col"><div class="p-3 border-b border-gray-700/50"><input type="text" placeholder="Pesquisar..." class="w-full bg-gray-800/50 rounded-full py-1 px-3 text-sm outline-none"></div><div class="flex-grow overflow-y-auto">${Config.amigosData.map(a => `<div class="flex items-center gap-3 p-3 cursor-pointer ${a.id === activeId ? 'bg-white/10' : 'hover:bg-white/5'} border-b border-gray-800/50" data-friend-id="${a.id}"><img src="${a.avatar}" class="w-12 h-12 rounded-full object-cover"><div><h4 class="font-bold">${a.nome}</h4><p class="text-sm text-gray-400 truncate">${a.status}</p></div></div>`).join('')}</div></aside><main class="w-full md:w-2/3 flex-col bg-gray-800/30 hidden md:flex"><header class="flex items-center p-3 border-b border-gray-700/50 bg-black/40 backdrop-blur-sm"> <button class="mr-2 md:hidden" id="back-to-chat-list"><i class="fas fa-arrow-left"></i></button> <img src="${activeFriend.avatar}" class="w-10 h-10 rounded-full object-cover mr-3"><div><h3 class="font-bold">${activeFriend.nome}</h3><p class="text-xs text-gray-300">${activeFriend.id === 1 ? 'Online' : 'Offline'}</p></div></header><div class="flex-grow p-4 overflow-y-auto space-y-4 backdrop-blur-[2px]"><div class="flex justify-end"><div class="bg-purple-600 p-2 rounded-lg max-w-xs shadow">${activeFriend.status}</div></div></div><footer class="p-3 flex items-center gap-2 bg-black/40 backdrop-blur-sm"><i class="fas fa-smile text-gray-300 text-xl cursor-pointer"></i><input type="text" placeholder="Digite uma mensagem" class="flex-grow bg-gray-700/50 rounded-full py-2 px-4 outline-none"><i class="fas fa-microphone text-gray-300 text-xl cursor-pointer"></i></footer></main></div>`;
                document.querySelectorAll('[data-friend-id]').forEach(el => el.addEventListener('click', () => {
                    this.renderChat(Number(el.dataset.friendId));
                    if (window.innerWidth <= 767) { document.getElementById('amigos-container').classList.add('chat-view'); }
                }));
                const backButton = document.getElementById('back-to-chat-list');
                if (backButton) { backButton.addEventListener('click', () => document.getElementById('amigos-container').classList.remove('chat-view')); }
            }
        },
        DokasAssistant: { init() { const container = document.getElementById('dokas-assistant-content'); if (container) container.innerHTML = `<div class="app-entering"><div class="text-6xl mb-4 animate-pulse">🔮</div><p class="text-lg">Bem-vindo ao DokasOS!</p><p class="text-sm mt-2 text-gray-400">Clique nos ícones para explorar.</p></div>`; } }
    };

    const DokasOS = {
        init() { console.log("Iniciando DokasOS - Edição Prestige..."); this.setFavicon(); InteractiveWallpaper.init(); SoundManager.init(); WindowManager.init(); DesktopManager.init(); YouTubePlayerManager.init(); Terminal.init(); AppModules.init(); setTimeout(() => WindowManager.open('dokas-assistant-prompt-window'), 1000); console.log("DokasOS Pronto."); },
        setFavicon() { const favicon = document.createElement('link'); favicon.rel = 'icon'; const svgIcon = `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><text y=".9em" font-size="90">🔮</text></svg>`; favicon.href = `data:image/svg+xml,${encodeURIComponent(svgIcon)}`; document.head.appendChild(favicon); }
    };

    DokasOS.init();
});
</script>
</body>
</html>
